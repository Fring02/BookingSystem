@inject IHttpContextAccessor accessor
@model LeisureServiceViewModel
@{ 
    ViewData["Title"] = Model.Name;
    Layout = "_Layout";
}
    <div class="bg-light">
        <div class="row p-5">
            <div class="col-md-8 service-info">
                <h2 class="text-dark text-center service-title">@Model.Name</h2>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item alert alert-primary">Location: @Model.Location</li>
                    <li class="list-group-item alert alert-primary">Website: <a href="@Model.Website">@Model.Website</a></li>
                    <li class="list-group-item">
                        Rating:
                        <span class="stars text-warning">
                            @for (int i = 1; i <= Model.Rating; i++)
                            {
                                <i class="fas fa-star"></i>
                            }
                        </span>
                    </li>
                </ul>
                <p class="lead mt-5">
                    @Model.Description
                </p>
            </div>
            <div class="col-md-4 service-img">
                <div id="service-images-carousel" class="carousel slide" data-ride="carousel">
                    <div class="carousel-inner">
                        @{
                            var image = Model.Images.FirstOrDefault();
                            string imageUrl = "https://yandex.kz/images/search?pos=0&from=tabbar&img_url=https%3A%2F%2Fwww.ikiparagraf.com%2Finfo%2Fbilinmeyen.png&text=unknown+image&rpt=simage";
                            if (image != null) imageUrl = image.Path;
                            <div class="carousel-item active">
                                <img src="@imageUrl" class="d-block w-100" alt="...">
                            </div>
                            foreach (var img in Model.Images.Skip(1))
                            {
                                imageUrl = "https://yandex.kz/images/search?pos=0&from=tabbar&img_url=https%3A%2F%2Fwww.ikiparagraf.com%2Finfo%2Fbilinmeyen.png&text=unknown+image&rpt=simage";
                                if (!string.IsNullOrEmpty(img.Path)) imageUrl = image.Path;
                                <div class="carousel-item">
                                    <img src="@imageUrl"
                                         class="d-block w-100" alt="...">
                                </div>
                            }
                          }
                        </div>
                    <a class="carousel-control-prev" href="#service-images-carousel" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#service-images-carousel" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
                @if(accessor.HttpContext.Session.Keys.Any())
                {
                    if (ViewBag.IsOrdered)
                    {
                        <div class="alert alert-success text-center">Ordered</div>
                    }
                    else
                    {
                    <div class="options mt-4">
                        <button data-toggle="modal" data-target="#orderModal" class="btn w-100 btn-success order">Order</button>
                    </div>
                    @await Html.PartialAsync("ServiceOrderForm", new BookingRequestViewModel
                       {
                           UserId = Guid.Parse(accessor.HttpContext.Session.GetString("id")),
                           ServiceId = Model.Id
                       })
                     }
                 }
            </div>
        </div>
    </div>